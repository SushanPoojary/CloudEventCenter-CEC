{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sushanpoojary/Documents/Sasha/275/Project/CEC/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sushanpoojary/Documents/Sasha/275/Project/CEC/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sushanpoojary/Documents/Sasha/275/Project/CEC/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable */import{createContext,useContext,useState}from\"react\";import{signInWithEmailAndPassword,createUserWithEmailAndPassword,onAuthStateChanged,signOut,updateProfile,sendPasswordResetEmail,sendEmailVerification,GoogleAuthProvider,signInWithPopup}from\"firebase/auth\";import{auth}from\"../firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";export var UserContext=/*#__PURE__*/createContext({});export var useUserContext=function useUserContext(){return useContext(UserContext);};export var UserContextProvider=function UserContextProvider(_ref){var children=_ref.children;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useState(function(){setLoading(true);var unsubscribe=onAuthStateChanged(auth,function(res){if(res){setUser(res);}else{setUser(null);}setError(\"\");setLoading(false);});return unsubscribe;},[]);// const registerUser = (email, password, name) => {\n//   setLoading(true);\n//   createUserWithEmailAndPassword(auth, email, password)\n//     .then(() =>\n//       updateProfile(auth.currentUser, {\n//         displayName: name,\n//       })\n//     )\n//     .then((res) => console.log(res))\n//     .catch((err) => setError(err.message))\n//     .finally(() => setLoading(false));\n// };\nvar registerUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){var userCred;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return createUserWithEmailAndPassword(auth,email,password);case 3:userCred=_context.sent;_context.next=6;return sendEmailVerification(userCred.user,{url:\"http://localhost:3000/firstVisit\"});case 6:return _context.abrupt(\"return\",{user:userCred.user});case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",{error:_context.t0.message});case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function registerUser(_x,_x2){return _ref2.apply(this,arguments);};}();var googleLogin=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var provider,userCred;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:provider=new GoogleAuthProvider();_context2.prev=1;_context2.next=4;return signInWithPopup(auth,provider);case 4:userCred=_context2.sent;_context2.next=7;return sendEmailVerification(userCred.user,{url:\"http://localhost:3000/firstVisit\"});case 7:return _context2.abrupt(\"return\",{user:userCred.user});case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);return _context2.abrupt(\"return\",{error:_context2.t0.message});case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[1,10]]);}));return function googleLogin(){return _ref3.apply(this,arguments);};}();var signInUser=function signInUser(email,password){setLoading(true);// localStorage.setItem(\"password\", password);\nsignInWithEmailAndPassword(auth,email,password).then(function(res){return console.log(res);}).catch(function(err){return setError(err.code);}).finally(function(){return setLoading(false);});};var logoutUser=function logoutUser(){signOut(auth);};var forgotPassword=function forgotPassword(email){return sendPasswordResetEmail(auth,email);};var contextValue={user:user,loading:loading,error:error,signInUser:signInUser,registerUser:registerUser,googleLogin:googleLogin,logoutUser:logoutUser,forgotPassword:forgotPassword};return/*#__PURE__*/_jsx(UserContext.Provider,{value:contextValue,children:children});};","map":{"version":3,"names":["createContext","useContext","useState","signInWithEmailAndPassword","createUserWithEmailAndPassword","onAuthStateChanged","signOut","updateProfile","sendPasswordResetEmail","sendEmailVerification","GoogleAuthProvider","signInWithPopup","auth","UserContext","useUserContext","UserContextProvider","children","user","setUser","loading","setLoading","error","setError","unsubscribe","res","registerUser","email","password","userCred","url","message","googleLogin","provider","signInUser","then","console","log","catch","err","code","finally","logoutUser","forgotPassword","contextValue"],"sources":["/Users/sushanpoojary/Documents/Sasha/275/Project/CEC/src/context/userContext.js"],"sourcesContent":["/* eslint-disable */\nimport { createContext, useContext, useState } from \"react\";\nimport {\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  onAuthStateChanged,\n  signOut,\n  updateProfile,\n  sendPasswordResetEmail,\n  sendEmailVerification,\n  GoogleAuthProvider,\n  signInWithPopup,\n} from \"firebase/auth\";\nimport { auth } from \"../firebase\";\n\nexport const UserContext = createContext({});\n\nexport const useUserContext = () => {\n  return useContext(UserContext);\n};\n\nexport const UserContextProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  useState(() => {\n    setLoading(true);\n    const unsubscribe = onAuthStateChanged(auth, (res) => {\n      if (res) {\n        setUser(res);\n      } else {\n        setUser(null);\n      }\n      setError(\"\");\n      setLoading(false);\n    });\n    return unsubscribe;\n  }, []);\n\n  // const registerUser = (email, password, name) => {\n  //   setLoading(true);\n  //   createUserWithEmailAndPassword(auth, email, password)\n  //     .then(() =>\n  //       updateProfile(auth.currentUser, {\n  //         displayName: name,\n  //       })\n  //     )\n  //     .then((res) => console.log(res))\n  //     .catch((err) => setError(err.message))\n  //     .finally(() => setLoading(false));\n  // };\n\n  const registerUser = async (email, password) => {\n    \n      try {\n        const userCred = await createUserWithEmailAndPassword(auth, email, password);\n        await sendEmailVerification(userCred.user, {\n          url: \"http://localhost:3000/firstVisit\",\n        });\n        // localStorage.setItem(\"password\", password);\n        return {\n          user: userCred.user,\n        };\n        \n      } catch (e) {\n        return {\n          error: e.message,\n        };\n      }\n    \n}\n\n  const googleLogin = async () => {\n\n    const provider = new GoogleAuthProvider();\n    try {\n      const userCred = await signInWithPopup(auth, provider);\n      await sendEmailVerification(userCred.user, {\n        url: \"http://localhost:3000/firstVisit\",\n      });\n      // localStorage.setItem(\"password\", 'google');\n      return {\n        user: userCred.user,\n      };\n      \n    } catch (e) {\n      return {\n        error: e.message,\n      };\n    }\n\n  }\n\n\n  const signInUser = (email, password) => {\n    setLoading(true);\n    // localStorage.setItem(\"password\", password);\n    signInWithEmailAndPassword(auth, email, password)\n      .then((res) => console.log(res))\n      .catch((err) => setError(err.code))\n      .finally(() => setLoading(false));\n  };\n\n  const logoutUser = () => {\n    signOut(auth);\n  };\n\n  const forgotPassword = (email) => {\n    return sendPasswordResetEmail(auth, email);\n  };\n\n  const contextValue = {\n    user,\n    loading,\n    error,\n    signInUser,\n    registerUser,\n    googleLogin,\n    logoutUser,\n    forgotPassword,\n  };\n  return (\n    <UserContext.Provider value={contextValue}>{children}</UserContext.Provider>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}